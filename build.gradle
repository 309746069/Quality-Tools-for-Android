buildscript {
	repositories { 
         mavenCentral()
	}
	dependencies { 
		classpath 'com.android.tools.build:gradle:0.5.6'
		
	}
}

configure(allprojects) {
	group = 'com.octo.android'

	ext.androidVersion           = "4.1.1.4"
	ext.androidSupportVersion           = "4.1.1.4"


}

configure(subprojects) { subproject ->

	repositories {
	     mavenCentral()
	     mavenLocal()
	}

}

project('android-sample') {
	description = "Android sample app under tests"

	apply plugin: 'android'
	apply plugin: 'eclipse'
	
	dependencies {
     compile 'joda-time:joda-time:2.2'
     compile 'com.android.support:support-v4:18.0.0'
	}
	    
	android {
	    buildToolsVersion "17.0"                
	    compileSdkVersion 17
	    
	    sourceSets {
	        main {
	            manifest.srcFile 'AndroidManifest.xml'
	            java.srcDirs = ['src/main/java']
	            resources.srcDirs = ['src']
	            //aild.srcDirs = ['src']
	            renderscript.srcDirs = ['src']
	            res.srcDirs = ['res']
	            assets.srcDirs = ['assets']
	        }
	    
	        instrumentTest.setRoot('../android-sample-tests')
	        instrumentTest {
		      java.srcDirs = ['../android-sample-tests/src/main/java']
		      res.srcDirs = ['../android-sample-tests/res']
		      assets.srcDirs = ['../android-sample-tests/assets']
		      resources.srcDirs = ['../android-sample-tests/src']
		    }
	
	    }

	    android.applicationVariants.each { variant ->
	        variant.install.doLast {
	            def result = exec {
	                executable = 'adb'
	                args = ['shell', 'am', 'start', '-c', 'android.intent.category.LAUNCHER', '-n', 'com.octo.android.sample/.ui.HelloAndroidActivity']
	            }
	        }
	    }
	}
}

configure(rootProject) {
	description = 'Quality Analysis Tools for Android'

}

